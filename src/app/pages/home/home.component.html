<select [(ngModel)]="url" (change)="loadFile(url)">
  @for (dir of files; track $index) {
  <optgroup [label]="dir.dirName">
    @for(file of dir.files; track $index){
    <option [value]="dir.dirName + '/' + file">{{ file }}</option>
    }
  </optgroup>
  }
</select>
<div class="content">
  @if(vstHandlerService.loaded$ | async){
  <div class="form">
    <h1>
      {{ (vstHandlerService.loaded$ | async)?.vstName }}
    </h1>
    <app-parameters></app-parameters>
    <button (click)="submit()">ENREGISTRER</button>
  </div>

  } @if(loaded$ | async){
  <div class="form">
    <div>
      type : @if((loaded$ | async)?.type === "" || (loaded$ | async)?.type ===
      undefined){
      <div>
        <input [(ngModel)]="type" />
      </div>
      } @else {
      {{ (loaded$ | async)?.type }}
      }
    </div>
    <h2>Parties</h2>
    @for (myItem of (loaded$ | async)?.linkPartParam; track $index) {
    <div class="part">
      @if(partModify[$index]){
      <input [(ngModel)]="parts[$index]" (change)="changePart()" />
      } @else {
      <div (dblclick)="partModify[$index] = true" style="font-weight: bold">
        {{ parts[$index] }}
      </div>
      }
      <div>
        <button (click)="removePart($index)">-</button>
        @if(partModify[$index]){
        <button
          (click)="partModify[$index] = false"
          [disabled]="parts[$index] == ''"
        >
          OK
        </button>
        }
      </div>
    </div>
    <ul>
      <li class="parameter header">
        <div>nom</div>
        <div class="type">type</div>
        <div>cat√©gorie</div>
        <div>Partie</div>
      </li>
    </ul>
    }
    <button (click)="addPart()">+</button>

    <button (click)="submit()">ENREGISTRER</button>
  </div>

  } @if(globalExport !== ""){
  <div class="export">
    {{ globalExport }}
  </div>
  }
</div>
